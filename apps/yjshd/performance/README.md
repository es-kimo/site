# yjshd 성능 측정 기록

## 측정 환경

- **OS**: macOS
- **Node**: v22.18.0
- **Next.js**: 16.0.10
- **측정 일시**: 2026-01-27
- **측정 도구**: Lighthouse (headless Chrome)

## 라우팅 구조

```
app/
├── layout.tsx              # 루트 레이아웃
├── page.tsx                # / (홈)
├── (static)/
│   └── [category]/
│       ├── page.tsx        # /1.소개, /2.글모음, /3.강좌 (카테고리 목록)
│       └── [subCategory]/
│           ├── layout.tsx
│           ├── page.tsx    # /1.소개/1.의료진 소개 (MDX 콘텐츠)
│           └── [slug]/     # 동적 슬러그
└── (dynamic)/
    ├── 3.강좌/
    │   ├── 2.콩팥질환 정보/
    │   └── 3.혈액투석 1,2,3/
    └── 4.게시판/
        ├── layout.tsx
        └── page.tsx        # /4.게시판 (게시글 목록)
```

## 측정 대상 페이지

| 페이지       | URL                              | 특징                      |
| ------------ | -------------------------------- | ------------------------- |
| 홈           | `/`                              | 이미지, 스크롤 애니메이션 |
| 카테고리     | `/1.소개`                        | 카드 리스트               |
| 서브카테고리 | `/1.소개/1.의료진 소개`          | MDX 렌더링                |
| 게시판       | `/4.게시판`                      | 동적 데이터, 페이지네이션 |
| 게시글 상세  | `/4.게시판/2026년 1월 휴진 안내` | MDX 렌더링                |

## 측정 항목

- **TTFB**: Time to First Byte (서버 응답 시간)
- **FCP**: First Contentful Paint
- **LCP**: Largest Contentful Paint
- **TBT**: Total Blocking Time
- **CLS**: Cumulative Layout Shift

## 측정 방법

1. `pnpm build --filter=yjshd` 프로덕션 빌드
2. `npx next start` 프로덕션 서버 실행
3. Lighthouse CLI로 각 페이지 측정 (headless Chrome)

---

## Before (최적화 전)

### 날짜: 2026-01-27 22:40 KST

#### Lighthouse 점수

| 페이지                           | Performance |
| -------------------------------- | ----------- |
| `/`                              | 98          |
| `/1.소개`                        | 98          |
| `/1.소개/1.의료진 소개`          | 98          |
| `/4.게시판`                      | 98          |
| `/4.게시판/2026년 1월 휴진 안내` | 98          |

#### 상세 지표 (ms)

| 페이지                           | TTFB | FCP | LCP  | TBT | CLS   |
| -------------------------------- | ---- | --- | ---- | --- | ----- |
| `/`                              | 24   | 765 | 2476 | 6   | 0.002 |
| `/1.소개`                        | 142  | 926 | 2477 | 5   | 0.001 |
| `/1.소개/1.의료진 소개`          | 106  | 914 | 2473 | 6   | 0.001 |
| `/4.게시판`                      | 113  | 916 | 2467 | 5   | 0.000 |
| `/4.게시판/2026년 1월 휴진 안내` | 98   | 926 | 2328 | 5   | 0.001 |

#### 평균값

| 지표        | 평균값     |
| ----------- | ---------- |
| Performance | **98**     |
| TTFB        | **97ms**   |
| FCP         | **889ms**  |
| LCP         | **2444ms** |
| TBT         | **5ms**    |
| CLS         | **0.001**  |

#### 분석

✅ **좋은 점:**

- Performance 점수 98점으로 매우 우수
- TBT 5ms로 메인 스레드 블로킹 거의 없음
- CLS 0.001로 레이아웃 안정성 우수

⚠️ **개선 필요:**

- **TTFB**: `/1.소개` 142ms로 다소 높음 (서버 응답 시간)
- **LCP**: 평균 2.4초로 개선 여지 있음 (목표: 2.5초 이하)
- **개발 모드 체감 속도**: 실제 사용시 페이지 전환이 느리게 느껴짐

#### 잠재적 성능 병목 (코드 분석 기반)

1. **TheHeader.tsx**: 모든 카테고리의 MDX 파일을 매번 파싱
2. **AllCategoriesSheet.tsx**: 동일하게 모든 MDX 컴파일
3. **게시판 페이지**: 40개+ 게시글 메타데이터 동적 import
4. **lib/content.ts**: `fs.readFileSync()` + `compile()` 캐싱 없음

---

## After (최적화 후)

### 날짜: (예정)

#### 적용할 최적화

- [ ] React `cache()` 함수로 `getMdxContent` 캐싱
- [ ] 헤더 네비게이션 데이터 빌드타임 생성
- [ ] 게시판 메타데이터 JSON 사전 생성
- [ ] `generateStaticParams()` 활용 정적 생성

#### Lighthouse 점수

| 페이지                           | Performance |
| -------------------------------- | ----------- |
| `/`                              |             |
| `/1.소개`                        |             |
| `/1.소개/1.의료진 소개`          |             |
| `/4.게시판`                      |             |
| `/4.게시판/2026년 1월 휴진 안내` |             |

#### 상세 지표 (ms)

| 페이지                           | TTFB | FCP | LCP | TBT | CLS |
| -------------------------------- | ---- | --- | --- | --- | --- |
| `/`                              |      |     |     |     |     |
| `/1.소개`                        |      |     |     |     |     |
| `/1.소개/1.의료진 소개`          |      |     |     |     |     |
| `/4.게시판`                      |      |     |     |     |     |
| `/4.게시판/2026년 1월 휴진 안내` |      |     |     |     |     |

---

## 개선율 요약

| 지표        | Before | After | 개선율 |
| ----------- | ------ | ----- | ------ |
| Performance | 98     |       |        |
| TTFB (평균) | 97ms   |       |        |
| FCP (평균)  | 889ms  |       |        |
| LCP (평균)  | 2444ms |       |        |

---

## 측정 리포트 파일

- [home.json](./reports/home.json) - 홈페이지
- [category.json](./reports/category.json) - /1.소개
- [subcategory.json](./reports/subcategory.json) - /1.소개/1.의료진 소개
- [board.json](./reports/board.json) - /4.게시판
- [post.json](./reports/post.json) - /4.게시판/2026년 1월 휴진 안내
